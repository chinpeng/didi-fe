<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<title>touch-move</title>
</head>
<body>
<section>
<input type="button" id="btn-move" value="STOP-TOUCH-MOVE" style="width: 200px; height: 90px;">
</section>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded",function(ev){
    var abc = "abc", btnMove = document.getElementById('btn-move');

    var didi = {
        touch: function(ele, callback, bubble){
            if(!bubble){
                bubble = false;
            }
            if(ele && callback){
                ele.addEventListener('touchstart',function(ev){
                    ev.target.focus();
                    // ev.target.setAttribute('start',true);
                    ev.stopPropagation();
                },bubble);

                var cb = function(ev){
                    ev.target.blur();
                    // console.log(ev.target.getAttribute("start"));
                    if(ev.target.getAttribute("moved") == "true"){
                        ev.target.setAttribute("moved","false");
                        alert("moved");
                    }else{
                        callback(ev);
                    }
                };
                ele.addEventListener('touchend', cb ,bubble);

                ele.addEventListener('touchmove',function(ev){
                    ev.target.setAttribute("moved",true);
                    // ele.removeEventListener('touchend',cb, false);
                },bubble);
            }
        }
    };

    /*
    * touchstart事件
    */
    didi.touch(btnMove, function(){
        alert("ssdss");
    }, false);

    // btnMove.addEventListener("touchstart",function(ev){
        //     alert(abc);
    // },false);

},false);
</script>
</body>
</html>